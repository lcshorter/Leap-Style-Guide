WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mentions-plugin:editor-autocomplete-mentions', location = 'js/tinyMce-autocomplete-settings-mentions.js' */
define("confluence-mentions-plugin/tinyMce-autocomplete-settings-mentions",["jquery","ajs","confluence/legacy"],function(c,b,d){function a(){if(b.DarkFeatures.isEnabled("fabric.mentions")&&b.Meta.getBoolean("editor-frontend-enabled")){return}var h;if(!d.Editor.Autocompleter){d.Editor.Autocompleter=tinymce.confluence.Autocompleter}var f=function(k){if(k){return b.contextPath()+"/rest/prototype/1/search.json"}else{if(b.Meta.get("remote-user")){return b.contextPath()+"/rest/mentions/1/network.json"}}return null},g=function(m,l){var k={"max-results":m.maxResults||10};if(l){k.query=d.unescapeEntities(l);k.search="user"}return k},i=function(o,n){var p=o.split(/\s/);var m=n.title;var k=-1;for(var l=0;l<p.length;l++){var q=m.indexOf(p[l]);if(q<k){return false}k=q}return true},e=function(s,l,r,n,m){if(h!==l){return}var q=s.statusMessage;var o;if(q){o=[[{html:s.statusMessage,className:"error"}]]}else{var k=[];o=[k];if(s.result){b.$.each(s.result,function(t,v){var u=b.$.extend({},v);u.key=u.username;u.linkAlias=u.title;u.title=u.title+" ("+u.username+")";k.push(u)});k.sort(function(u,t){var w=i(l,u);var v=i(l,t);if(w==v){return(u<t?u:t)}return w?-1:1})}o=b.REST.convertFromRest(o)}function p(u,t){if(m&&typeof m=="function"){m(o,u,t)}}r(o,l,p,l.split(/\s/))},j=function(m,o,s,l,r,u,p){var k=o(l),q=m.settings.cacheManager,n=q.get(l),t;if(k){t=c.ajax({type:"GET",url:k,data:s(m,l),dataType:"json",global:false,timeout:10000});t.done(function(v){q.put(l,v)});if(n){e(n,l,r,u,p)}else{t.done(function(v){e(v,l,r,u,p)});t.fail(function(w,v){if(v=="timeout"){e({statusMessage:"Timeout",query:l},l,r,u)}})}}else{r([],l)}};d.Editor.Autocompleter.Settings["@"]={ch:"@",endChars:[],dropDownClassName:"autocomplete-mentions",selectFirstItem:true,getHeaderText:function(l,k){if(k){return "User suggestions"}else{return "Mention someone by typing their name..."}},getAdditionalLinks:function(n,l,m){var k=[];m(l,k);return k},getDataAndRunCallback:function(m,k,l){k=c.trim(k);h=k;j(m,f,g,k,l,"content",function(n,p,o){if(p!==""&&n.length<2){if(o.length==0){o.push({html:'<span class="no-result">'+"No user found"+"</span>"})}}else{o.length=0}})},update:function(m,k){if(k.restObj){var l=b.$.extend(k.restObj,{title:k.restObj.linkAlias});k=d.Link.fromREST(l)}k.insert()}}}return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mentions-plugin:editor-autocomplete-mentions', location = 'js/mention_editor_plugin.js' */
define("confluence-mentions-plugin/mention_editor_plugin",["jquery","ajs","confluence/legacy","confluence-mentions-plugin/tinyMce-autocomplete-settings-mentions"],function(c,a,d,b){return{init:function(){if(a.DarkFeatures.isEnabled("fabric.mentions")&&a.Meta.getBoolean("editor-frontend-enabled")){return}a.EventQueue=a.EventQueue||[];function f(){a.EventQueue.push({name:"confluencementioninsert"});d.Editor.Autocompleter.Manager.shortcutFired("@",true)}function e(g){return g&&g.shiftKey&&!g.ctrlKey&&!g.altKey&&!g.altGraphKey&&!g.metaKey&&g.which===64}tinymce.create("tinymce.plugins.InsertMention",{init:function(g){b();c("#insertmention-button").click(function(h){h.stopPropagation();h.preventDefault();var i=d.Editor.Autocompleter.Manager.getInputDrivenDropdown();if(!i||i.inactive){tinymce.execCommand("mceFocus",false,g.id);f()}});a.bind("editor.text-placeholder.activated",function(i,h){if(h&&h.placeholderType==="mention"){if(e(h.triggerEvent)){tinymce.dom.Event.cancel(h.triggerEvent)}f()}});if(a.Rte.Placeholder&&a.Rte.Placeholder.addPlaceholderType){a.Rte.Placeholder.addPlaceholderType({type:"mention",label:"User mention",tooltip:"Instructional text is replaced with suggested people when a person types."})}},getInfo:function(){return{longname:"Insert Mention",author:"Atlassian",authorurl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("insertmention",tinymce.plugins.InsertMention);a.Rte.BootstrapManager.addTinyMcePluginInit(function(g){g.plugins+=",insertmention"})}}});require("confluence/module-exporter").safeRequire("confluence-mentions-plugin/mention_editor_plugin",function(a){require("ajs").bind("rte-pre-resolveplugins",function(){a.init()})});
}catch(e){WRMCB(e)};