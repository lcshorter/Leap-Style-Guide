WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-paste:autoconvert-confluence', location = 'js/autoconvert/transformers/confluencepaste.js' */
define("confluence-paste/autoconvert/transformers/confluencepaste",["ajs","tinymce","jquery","document"],function(f,g,j,k){function i(){var d=this,e=function(c,a){return!a.anchor||0===a.anchor.indexOf("comment-")?c:c+"#"+a.anchor.substring(a.anchor.indexOf("-")+1)},l=function(c,a,h){if(a=(a=c.authority===k.location.host)&&(!f.contextPath()||0===c.path.indexOf(f.contextPath()))){var a=f.contextPath()?c.path.substring(f.contextPath().length+1):c.path.substring(1),a=decodeURIComponent(a).split("/"),
b;c.queryKey=c.queryKey||{};if(c.queryKey.focusedCommentId)b="$"+c.queryKey.focusedCommentId,b=e(b,c);else if(c.queryKey.pageId)b="$"+c.queryKey.pageId,b=e(b,c);else if("display"===a[0])2===a.length&&0===a[1].indexOf("~")?b=a[1]:3===a.length?(b=a[1]+":"+a[2].replace(/\+/g," "),b=e(b,c)):4===a.length&&"status"===a[1]?b="$"+a[3]:6===a.length&&(b=a[1]+":/"+a[2]+"/"+a[3]+"/"+a[4]+"/"+a[5].replace(/\+/g," "),b=e(b,c));else if("spaces"===a[0]){if(b=(b=d.spaViewPageLinkHandler(a))||d.spaBlogPostLinkHandler(a))c=
e(b,c);else{if((2===a.length||3===a.length)&&-1===a[1].indexOf(".action"))b=a[1]+":",b=e(b,c);c=b}b=c}else"users"===a[0]&&(2===a.length&&"viewuserprofile.action"==a[1]?b="~"+c.queryKey.username:2===a.length&&"viewmyprofile.action"==a[1]&&(b="~"+f.Meta.get("remote-user")));b?g.plugins.Autoconvert.getHtmlFromWikiMarkup("["+b+"]",function(a){h(j(a).children()[0])},function(){h()}):h()}else h()};this.init=function(){g.plugins.Autoconvert.autoConvert.addHandler(l)}}i.prototype.spaViewPageLinkHandler=function(d){var e=
d[3];if("spaces"===d[0]&&"pages"===d[2]&&e)return"$"+e};i.prototype.spaBlogPostLinkHandler=function(d){var e=d[1],g=d[3],c=d[4],a=d[5],h=d[6],b=d[7];if("spaces"===d[0]&&"blog"===d[2]&&e&&g&&c&&a&&h&&b)return f.format("{0}:/{1}/{2}/{3}/{4}",e,g,c,a,b.replace(/\+/g," "))};return i});require("confluence/module-exporter").safeRequire("confluence-paste/autoconvert/transformers/confluencepaste",function(f){var g=require("ajs"),f=new f;g.bind("init.rte",f.init)});
}catch(e){WRMCB(e)};