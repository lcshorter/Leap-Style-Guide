WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/themes/atlassian/editor_template.js' */
define("atlassian-tinymce/themes/atlassian/editor_template",["ajs","confluence/templates","jquery","tinymce","underscore"],function(k,j,g,h,i){return function(){var l=h.DOM,m=h.each,n=h.explode,o=h.extend,e;e=function(a){this.init=this.init(a)};e.INCOMPATIBLE_PLUGINS=["dfe"];e.shouldInit=function(){var a=g("body");return a.hasClass("edit")||a.hasClass("create")||a.hasClass("copy-page")};e.suppressIncompatiblePlugins=function(){for(var a=function(){},b=0,f=e.INCOMPATIBLE_PLUGINS.length;b<f;b++)h.PluginManager.lookup[e.INCOMPATIBLE_PLUGINS[b]]=
a};e.prototype.init=function(a){function b(a){c.toggleToolbarButtons(a,a,a,function(){return!g(this).parent().hasClass("close")})}function f(){var a=m-i.scrollTop(),c=l.offset().top-h.offset().top,b=j.outerHeight(),d=l.outerHeight();j.css("top",c+d+a+o+"px");e.css("padding-top",b+n+"px")}var d=g.ui.keyCode,c=a.plugins.customtoolbar,q=g("#content-title"),h=g("form.editor"),e=g(a.getBody()),i=g(a.getDoc()),j=g("#editor-precursor"),k=g(a.getWin()),l=g("#toolbar"),m=i.scrollTop(),n=parseInt(e.css("padding-top"),
10)+parseInt(e.css("margin-top"),10),o=parseInt(j.css("padding-top"),10),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame;q.on("keydown",function(c){var b=c.keyCode||c.which;if(b===d.ENTER||b===d.DOWN)c.preventDefault(),c.stopPropagation(),a.focus()}).on("focus click",function(){b(!0)});k.on("focus",function(){b(!1)});(function p(){r(p);f()})();e.on("scroll mousewheel",function(){setTimeout(f,0)});return!0};return{Editor:e,ThemeOptions:{controlHandlers:{},controls:{bold:"Bold",italic:"Italic",
underline:"Underline",strikethrough:"Strikethrough",justifyleft:"JustifyLeft",justifycenter:"JustifyCenter",justifyright:"JustifyRight",bullist:"InsertUnorderedList",numlist:"InsertOrderedList",tasklist:"InsertInlineTaskList",outdent:"Outdent",indent:"Indent",cut:"Cut",copy:"Copy",paste:"Paste",undo:"Undo",redo:"Redo",removeformat:"RemoveFormat",sub:"subscript",sup:"superscript",forecolor:"ForeColor",forecolorpicker:"mceForeColor",backcolor:"HiliteColor",backcolorpicker:"mceBackColor",charmap:"mceCharMap",
visualaid:"mceToggleVisualAid",anchor:"mceInsertAnchor",newdocument:"mceNewDocument",blockquote:"mceBlockQuote"},stateControls:"bold italic underline bullist numlist tasklist justifyleft justifycenter justifyright strikethrough sub sup monospace".split(" "),init:function(a,b){var f=e.shouldInit(),d=this;f&&e.suppressIncompatiblePlugins();d.editor=a;d.url=b;d.settings=o({theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"formatselect,bold,italic,underline,strikethrough,forecolor,separator,table,row_before,row_after,delete_row,col_before,col_after,delete_col,delete_table,separator,bullist,numlist,tasklist,outdent,indent,blockquote,justifyleft,justifycenter,justifyright,justifyfull,separator,sup,sub,separator,undo,redo,separator,conflink,oldlinkbrowserButton,confimage,conf_macro_browser,separator,search,code,customtoolbar, monospacep,h1,h2,h3,h4,h5,h6,pre,blockquote",
readonly:a.settings.readonly},a.settings);a.onInit.add(function(){a.settings.readonly||(a.onNodeChange.add(d.nodeChanged,d),a.onKeyUp.add(d._updateUndoStatus,d),a.onMouseUp.add(d._updateUndoStatus,d),a.dom.bind(a.dom.getRoot(),"dragend",function(){d._updateUndoStatus(a)}),f&&new e(a))})},execCommand:function(a,b,f){return(a=this["_"+a])?(a.call(this,b,f),!0):!1},renderUI:function(a){this.bindControls();return{iframeContainer:l.get("rte"),editorContainer:"wysiwyg",sizeContainer:void 0,deltaHeight:a.deltaHeight}},
getInfo:function(){return{longname:"Confluence theme",author:"Atlassian",authorurl:"http://tinymce.moxiecode.com",version:h.majorVersion+"."+h.minorVersion}},bindControls:function(){var a=this;m(n(a.settings.theme_advanced_buttons1),function(b){if(!a.createEditorButtons(b))switch(b){case "formatselect":a.createBlockFormats()}});a.bindControlHandlers();a.renderToolbarButtons()},renderToolbarButtons:function(){var a=this,b=j.Editor.Toolbar.toolbarButton,f={toolbar:"toolbar-primary",title:"",tooltip:"",
cmd:"",className:"",locationGroup:null,weight:Infinity,onclick:null},d=i.map(this.editor.buttons,function(a,b){a=i.extend({},f,a);a.id=b;a.weight=i.isNumber(a.weight)?a.weight:Infinity;return a}),d=i.filter(d,function(a){return!!a.locationGroup});i.each(["toolbar-primary"],function(c){var f=g("."+c),c=i.where(d,{toolbar:c}),c=i.sortBy(c,"weight");i.each(c,function(c){a.createEditorButtons(c.id);var d=f.find("."+c.locationGroup),c=g(b({button:c}));d.append(c).removeClass("hidden")})})},createEditorButtons:function(a){var b=
this.editor.buttons[a];if(b)this.controls[a]=b.cmd?b.cmd:b.onclick;else return!1},bindControlHandlers:function(){var a=this;a.controlHandlers.buttons={};a.controlHandlers.buttons.state=new h.util.Dispatcher;a.controlHandlers.buttons.click=new h.util.Dispatcher;a.controlHandlers.buttons.click.add(function(b){var f=a.controls[b],d=typeof f;"string"===d?k.Rte.getEditor().execCommand(a.controls[b]):"function"===d&&f()})},createBlockFormats:function(){this.controlHandlers.formatselect={};this.controlHandlers.formatselect.state=
new h.util.Dispatcher;this.controlHandlers.formatselect.click=new h.util.Dispatcher;this.controlHandlers.formatselect.click.add(function(a){k.Rte.getEditor().execCommand("FormatBlock",!1,a)})},createForeColorMenu:function(){return!0},_updateUndoStatus:function(a){a=a.undoManager;this.controlHandlers.buttons.state.dispatch("undo","disabled",!a.hasUndo()&&!a.typing);this.controlHandlers.buttons.state.dispatch("redo","disabled",!a.hasRedo())},nodeChanged:function(a,b,f,d,c){var e=this;m(e.stateControls,
function(b){e.controlHandlers.buttons.state.dispatch(b,"active",!!a.queryCommandState(e.controls[b]))});e._updateUndoStatus(a);e.controlHandlers.buttons.state.dispatch("outdent","disabled",!a.queryCommandState("Outdent"));a:{b=l.isBlock;f=c.parents;for(c=0;c<f.length;c++)if(b(f[c])){c=f[c];break a}c=void 0}c&&e.controlHandlers.formatselect.state.dispatch(c.nodeName.toLowerCase())}}}}});
require("confluence/module-exporter").safeRequire("atlassian-tinymce/themes/atlassian/editor_template",function(k){require("ajs").toInit(function(){var j=require("tinymce"),g=k();j.ThemeManager.requireLangPack("advanced");j.create("tinymce.themes.ConfluenceTheme",g.ThemeOptions);j.ThemeManager.add("atlassian",j.themes.ConfluenceTheme);window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/jquery/jquery-column.js' */
/*
 jQuery Column cell selector v1.0

 Licensed under the new BSD License.
 Copyright 2009-2012, Bram Stein
 All rights reserved.

 ATLASSIAN modified: Removed all extensions,modifications to jQuery expression internals (jQuery.expr)
 now creates pseudo selector via jQuery/Sizzle preferred method
*/
define("atlassian-tinymce/jquery/jquery-column",["jquery"],function(f){var g=/([\+\-]?\d*)[nN]([\+\-]?\d*)/,k,c;return{nthCol:function(a){var i=[],j={multiplier:0,offset:0};"even"===a?a="2n":"odd"===a?a="2n+1":/^\d*$/.test(a)&&(a="0n+"+a);i=g.exec(a);null!==i&&(j.multiplier=i[1]-0,j.offset=i[2]-0);c=j;var d,l,e=[],h=0,m=[];f.each(this,function(n,a){var b=0,c=0,f=a.rowSpan||1,g=a.colSpan||1;if(a.parentNode!==d){d=a.parentNode;if(d.parentNode!==l){l=d.parentNode;e=[]}h=0;e[d.rowIndex]===void 0&&(e[d.rowIndex]=
[])}for(b=0;b<e[d.rowIndex].length+1;b=b+1)if(e[d.rowIndex][b]===void 0){h=b;break}m[n]=h;for(b=d.rowIndex;b<d.rowIndex+f;b=b+1){e[b]===void 0&&(e[b]=[]);for(c=h;c<h+g;c=c+1)e[b][c]=true}});k=m;return f(this).filter(function(a){a=k[a]-(c.offset-1);a=c.multiplier===0?a===0:a%c.multiplier===0&&a/c.multiplier>=0;return a})}}});require("confluence/module-exporter").safeRequire("atlassian-tinymce/jquery/jquery-column",function(f){var g=require("jquery");g.extend(g.fn,f)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/lists/editor_plugin_src.js' */
define("atlassian-tinymce/plugins/lists/editor_plugin_src",["tinymce","ajs","jquery"],function(d,o,D){function E(a,b){for(;a&&(8===a.nodeType||3===a.nodeType&&/^[ \t\n\r]*$/.test(a.nodeValue));)a=b(a);return a}function r(a){return E(a,function(a){return a.previousSibling})}function u(a){return E(a,function(a){return a.nextSibling})}function F(a,b,k){return a.dom.getParent(b,function(a){return-1!==d.inArray(k,a)})}function q(a){return a&&("OL"===a.tagName||"UL"===a.tagName)}function C(a,b){var d,c;
for(d=r(a.lastChild);q(d);)c=d,d=r(c.previousSibling);c&&(d=b.create("li",{style:v}),b.split(a,c),b.insertAfter(d,c),d.appendChild(c),d.appendChild(c),a=d.previousSibling);return a}function x(a,b,d){var c=r(a.previousSibling),a=c?w(c,a,b?c:!1,d):a;return G(a,b,d)}function G(a,b,d){var c=u(a.nextSibling);return c?w(a,c,b?c:!1,d):a}function w(a,b,d,c){var f=!!d;if(!a||!b)c=!1;else if("LI"===a.tagName&&"LI"===b.tagName)c="none"===b.style.listStyleType||H(b);else if(q(a)){if(!(c=a.tagName===b.tagName&&
a.className===b.className&&(f||a.style.listStyleType===b.style.listStyleType)))c=u(b.firstChild),f=r(b.lastChild),c=c&&f&&q(b)&&c===f&&(q(c)||"none"===c.style.listStyleType||H(c))}else c=c&&"P"===a.tagName&&"P"===b.tagName;if(c){c=r(a.lastChild);f=u(b.firstChild);for("P"===a.tagName&&a.appendChild(a.ownerDocument.createElement("br"));b.firstChild;)a.appendChild(b.firstChild);d&&(a.style.listStyleType=d.style.listStyleType);b.parentNode.removeChild(b);w(c,f,!1);return a}a&&("LI"===a.tagName&&q(b))&&
a.appendChild(b);return b}function H(a){var d=u(a.firstChild),a=r(a.lastChild);return d&&a&&d===a&&q(d)}function I(a,d){var k;d.is(a,"li,ol,ul")||(k=d.getParent(a,"li"))&&(a=k);return a}var v="list-style-type: none; background-image: none;",J="a,b,i,em,strong,u,span,s,sub,sup,code,br",y=d.each,s=d.dom.Event,z;return{init:function(a){function b(){var n=a.selection.getStart();return"LI"==n.tagName?n:a.dom.getParent(n,"li")}function k(a){if(a){var a=D(a),d=a.find("*"),e=d.filter(J);return d.length!==
e.length?!1:0===o.trim(a.text()).length&&1>=e.filter("br").length}return!1}function c(n){if(n&&(d.isGecko||d.isWebKit))for(var n=n.childNodes,b,e=n.length-1;0<=e;e--)b=n[e],3===b.nodeType&&!b.length&&a.dom.remove(b)}function f(a,c){if(c.keyCode===d.VK.BACKSPACE&&d.isWebKit){var e=b();if(e){var h=a.dom.getParent(e,"ol,ul"),f=a.selection.getRng();if(h&&h.firstChild===e&&(0===f.startOffset||1===f.startOffset&&""===f.startContainer.textContent)&&!a.selection.getContent().trim()&&f.startContainer.textContent===
e.textContent)return a.execCommand("Outdent",!1,e),a.undoManager.add(),s.cancel(c)}}}function j(a,b,e){e&&(1===e.nodeType&&a.dom.is(e,"li"))&&(b=e.parentNode,d.each(a.dom.select("li>ul,li>ol",b),function(d){a.dom.getAttrib(d.parentNode,"data-mce-style")||d.previousSibling||d.parentNode.insertBefore(a.dom.doc.createElement("br"),d)}))}function m(a,c){var e,h;if(b()&&(c.keyCode===d.VK.ENTER&&!c.shiftKey||c.keyCode===d.VK.BACKSPACE||c.keyCode===d.VK.DELETE)){e=a.selection.getRng(!0);h=e.endContainer;
if(3===h.nodeType){if(e.endOffset!==h.length)return;h=h.nextSibling}else if(1===h.nodeType)h=h.childNodes[e.endOffset];else return;if(h&&a.dom.is(h,"ul,ol"))if(d.isIE){var f=h,i=a.dom.doc.createTextNode(String.fromCharCode(160)),g=f.previousSibling;e=d.isIE6||d.isIE7||d.isIE8?e:a.getDoc().createRange();g&&3===g.nodeType&&g.nodeValue[g.length-1]==i.nodeValue?(e.setStart(g,g.length-1),e.setEnd(g,g.length-1)):(h.parentNode.insertBefore(i,f),e.setStartBefore(i),e.setEndBefore(i));e.collapse(!0);a.selection.setRng(e)}else h.parentNode.insertBefore(a.dom.create("br"),
h)}}function g(a){function f(d){var e=d.parentNode,b=e.previousSibling,h;c(e);e.childNodes[0]===d&&!a.dom.getAttrib(e,"data-mce-style")&&(a.selection.getStart().parentNode==d&&(h=a.selection.getRng(!0),h={startOffset:h.startOffset,startContainer:h.startContainer}),b?b.appendChild(d):(b=a.dom.create("li",{style:v}),b.appendChild(d),e.parentNode.insertBefore(b,e)),h&&a.selection.setCursorLocation(h.startContainer||d.firstChild,h.startOffset),k(e)&&a.dom.remove(e))}var e=b();if(e){var h=e.parentNode;
d.grep(a.dom.select("li>ul, li>ol",h),f);a.dom.is(h.parentNode,"li")&&f(h);e===h.lastChild&&(h.nextSibling&&a.dom.is(h.nextSibling,"ul, ol"))&&d.grep(a.dom.select("li>ul, li>ol",h.nextSibling),f)}}function l(a,d){if(46===d.keyCode&&!d.shiftKey){var e=b();if(e&&(0===e.childNodes.length||1===e.childNodes.length&&"BR"===e.firstChild.nodeName)){var c,f;if(c=e.nextSibling)c=a.dom.doc.createTreeWalker(c,NodeFilter.SHOW_TEXT,null,!1),c=c.nextNode(),f=a.getDoc().createRange(),f.setStart(c,0),f.setEnd(c,0),
a.selection.setRng(f),a.dom.remove(e),a.undoManager.add(),s.cancel(d)}}}var p="UNKNOWN";this.ed=a;a.addCommand("Indent",this.indent,this);a.addCommand("Outdent",this.outdent,this);a.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this);a.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this);a.addCommand("InsertInlineTaskList",function(){o.Rte.Support.inlineTasks()&&this.applyList("UL","OL","inline-task-list",{attributesOnItems:{"data-inline-task-id":""},
placeholderText:"Type your task here, using \"@\" to assign to a user and \"//\" to select a due date"})},this);a.addCommand("InsertInlineTaskListNoToggle",function(){o.Rte.Support.inlineTasks()&&this.applyList("UL","OL","inline-task-list",{attributesOnItems:{"data-inline-task-id":""},placeholderText:"Type your task here, using \"@\" to assign to a user and \"//\" to select a due date",noToggle:!0})},this);a.onInit.add(function(){a.editorCommands.addCommands({outdent:function(){function d(b){return(b=e.getParent(b,e.isBlock))&&0<parseInt(a.dom.getStyle(b,
"margin-left")||0,10)+parseInt(a.dom.getStyle(b,"padding-left")||0,10)}var b=a.selection,e=a.dom;return d(b.getStart())||d(b.getEnd())||a.queryCommandState("InsertOrderedList")||a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertInlineTaskList")}},"state")});a.onKeyUp.add(function(f,g){if("TABBING"==p)return f.execCommand(g.shiftKey?"Outdent":"Indent",!0,null),c(b()),p="UNKNOWN",s.cancel(g);if("EMPTY"==p){var e=b();f.execCommand(!0===f.settings.list_outdent_on_enter||g.shiftKey?
"Outdent":"Indent",!0,null);if(d.isIE){var h=a.dom.getParent(e,"ol,ul");null!=h&&(h=h.lastChild,h.appendChild(a.getDoc().createTextNode(o.Rte.HIDDEN_CHAR)),a.selection.setCursorLocation(h,0))}c(e);o.Rte.showSelection();return s.cancel(g)}if("ESCAPE"==p)if(d.isIE6||d.isIE7||d.isIE8)e=f.getDoc().createTextNode(o.Rte.HIDDEN_CHAR),f.selection.getNode().appendChild(e);else if(d.isIE9||d.isIE10||d.isIE11||d.isGecko||d.isWebKit)return f.execCommand("Outdent"),s.cancel(g)});a.onKeyDown.add(function(c,f){if(f.keyCode===
d.VK.TAB&&!f.altKey&&!f.ctrlKey&&(a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList")||a.queryCommandState("InsertInlineTaskList")||a.queryCommandState("InsertInlineTaskListNoToggle")))p="TABBING";else{var e;if(e=f.keyCode===d.VK.ENTER&&!f.shiftKey)if(e=b()){var h=e.parentNode.parentNode;e=e.parentNode.lastChild===e&&!(q(h)?h.parentNode&&"LI"===h.parentNode.tagName:"LI"===h.tagName)&&k(e)}else e=!1;p=e?"ESCAPE":f.keyCode===d.VK.ENTER&&!f.shiftKey&&a.selection.isCollapsed()&&
k(b())?"EMPTY":"UNKNOWN"}});a.onKeyDown.add(function(a,b){("TABBING"==p||"EMPTY"==p||(d.isGecko||d.isWebKit)&&"ESCAPE"==p)&&s.cancel(b)});a.onKeyDown.add(function(a,b){var e;if(d.isGecko){var c=a.selection.getStart();if(!(b.keyCode!=d.VK.BACKSPACE||"IMG"!==c.tagName))if(e=c.parentNode.previousSibling){if(!("UL"===e.tagName||"OL"===e.tagName))if(e.previousSibling&&("UL"===e.previousSibling.tagName||"OL"===e.previousSibling.tagName))e=e.previousSibling;else return;e=e.firstChild;var f=null;do{if(!e)break;
"LI"===e.tagName&&(f=e)}while(e=e.nextSibling);e=f;f=a.dom.createRng();f.setStart(e,1);f.setEnd(e,1);a.selection.setRng(f);a.selection.collapse(!0);var f=a.selection.getBookmark(),g=c.parentNode.cloneNode(!0);if("P"===g.tagName||"DIV"===g.tagName)for(;0<g.childNodes.length;)e.appendChild(g.childNodes[0]);else e.appendChild(g);c.parentNode.parentNode.removeChild(c.parentNode);a.selection.moveToBookmark(f)}}});a.onKeyDown.add(function(b,c){var e;if(e=c.keyCode===d.VK.ENTER&&!c.shiftKey){var f=a.selection.getNode();
e=a.dom.is(f,"h1,h2,h3,h4,h5,h6,p,div")&&"LI"===f.parentNode.tagName&&f.parentNode.lastChild===f;f=o.EditorUtils.isCursorAtEndOf(f,a.selection.getRng(!0));e=a.selection.isCollapsed()&&e&&f}if(e){b.undoManager.beforeChange();b.undoManager.add();e=b.selection.getNode();var g=b.dom.create("li",{},!d.isIE?'<br data-mce-bogus="true">':"");e=b.dom.getParent(e,"li");b.dom.insertAfter(g,e);d.isIE6||d.isIE7||d.isIE8?(g.appendChild(b.dom.create("&nbsp;")),b.selection.setCursorLocation(g,1)):d.isGecko?setTimeout(function(){b.selection.setCursorLocation(g,
0)},0):b.selection.setCursorLocation(g,0);b.undoManager.add();c.preventDefault()}});d.isWebKit&&(a.onNodeChange.add(g),a.onKeyUp.add(g));d.isIE?a.onKeyDown.add(m):(a.onNodeChange.add(j),d.isGecko&&a.onKeyDown.add(m));d.isGecko&&a.onKeyDown.add(l);d.isWebKit&&a.onKeyDown.add(f)},applyList:function(a,b,k,c){function f(a){a&&"BR"===a.tagName&&i.remove(a)}function j(a){a&&"LI"===a.tagName&&(i.removeClass(a,"checked"),a.removeAttribute("data-inline-task-id"))}function m(a){if(w&&a&&"LI"===a.tagName)for(var b in w)a.setAttribute(b,
w[b])}function g(b){function e(a){(a.style.marginLeft||a.style.paddingLeft)&&h.adjustPaddingFunction(!1)(a)}var c=i.create(a),g;""!=k&&(c.className=k);if("LI"===b.tagName)m(b);else{if("P"===b.tagName||"DIV"===b.tagName||"BODY"===b.tagName){p(b,function(a,c){l(a,c,b.tagName==="BODY"?null:a.parentNode);g=a.parentNode;e(g);(!d.isChrome||d.isChrome&&c&&c.parentNode&&i.isBlock(c.parentNode))&&f(c)});if(g){if("LI"===g.tagName&&("P"===b.tagName||1<A.length)){if(B&&h.isEmptyElement(g)){var n=document.createTextNode(B),
c=i.create("span");c.appendChild(n);g.appendChild(c);setTimeout(function(){t.selection.select(n)},0);(d.isIE7||d.isIE8)&&g.appendChild(t.dom.create("br",{_mce_bogus:"1"}));var j=function(a,b){if((b.which||b.keyCode)==64)if(n.textContent==B)n.textContent=" ";else if(n.data==B)n.data=" ";window.setTimeout(function(){t.onKeyPress.remove(j)},0)};t.onKeyPress.addToTop(j)}i.split(g.parentNode.parentNode,g.parentNode)}x(g.parentNode,!0);m(g)}return}g=i.create("li");m(g);i.insertAfter(g,b);g.appendChild(b);
e(b);b=g}i.insertAfter(c,b);c.appendChild(b);x(c,!0);q.push(b)}function l(a,b,c){for(var d=a;!i.isBlock(a.parentNode)&&a.parentNode!==i.getRoot();)a=i.split(a.parentNode,a.previousSibling),d=a=a.nextSibling;if(c){c=c.cloneNode(!0);for(a.parentNode.insertBefore(c,a);c.firstChild;)i.remove(c.firstChild);c=i.rename(c,"li")}else c=i.create("li"),a.parentNode.insertBefore(c,a);d&&d==b&&(a=i.create("br"),i.setAttrib(a,"data-mce-bogus",1),c.appendChild(d),i.insertAfter(a,d));for(;d&&d!=b;)a=d.nextSibling,
c.appendChild(d),d=a;0===c.childNodes.length&&(c.innerHTML='<br _mce_bogus="1" />');g(c)}function p(a,b){function c(a,b){var d=i.createRng(),e;z.keep=!0;t.selection.moveToBookmark(z);z.keep=!1;e=t.selection.getRng(!0);b||(b=a.parentNode.lastChild);d.setStartBefore(a);d.setEndAfter(b);return!(0<d.compareBoundaryPoints(g,e)||0>=d.compareBoundaryPoints(h,e))}function d(a){if(a.nextSibling)return a.nextSibling;if(!i.isBlock(a.parentNode)&&a.parentNode!==i.getRoot())return d(a.parentNode)}var e,f,g=3,
h=1;e=a.firstChild;var k=!1;y(i.select("br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl",a),function(a){if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;c(e,a)&&(i.addClass(a,"_mce_tagged_br"),e=d(a))});k=e&&c(e,void 0);e=a.firstChild;y(i.select("br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl",a),function(a){var c=d(a);if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;i.hasClass(a,"_mce_tagged_br")?(b(e,a,f),f=null):f=a;e=c});
k&&b(e,void 0,f)}function n(a){p(a,function(a,b,c){l(a,b);f(b);f(c)})}function o(a){j(a);if(-1===d.inArray(q,a)){if(a.parentNode.tagName===b||!v)i.split(a.parentNode,a),g(a),G(a.parentNode,!1);""!=k&&(a.parentNode.className=k);m(a);q.push(a)}}function e(a){j(a);var b,c;if(-1===d.inArray(q,a)&&(a=C(a,i))){for(;i.is(a.parentNode,"ol,ul,li");)i.split(a.parentNode,a);q.push(a);a=i.rename(a,"p");b=x(a,!1,t.settings.force_br_newlines);if(b===a)for(a=a.firstChild;a;)i.isBlock(a)?(a=i.split(a.parentNode,
a),c=!0,b=a.nextSibling&&a.nextSibling.firstChild):(b=a.nextSibling,c&&"BR"===a.tagName&&i.remove(a),c=!1),a=b}}var h=this,t=h.ed,i=t.dom,q=[],r=!1,s=!1,u=!1,v=!1,A=t.selection.getSelectedBlocks(),k=k||"",c=c||{},w=c.attributesOnItems,B=c.placeholderText,c=c.noToggle;y(A,function(c){c=I(c,i);c="LI"===c.tagName?c.parentNode:c;v=c.className===k;c.tagName===b?s=!0:c.tagName===a?r=!0:u=!0});c=u&&!r||s||!v||0===A.length?{LI:o,H1:g,H2:g,H3:g,H4:g,H5:g,H6:g,P:g,BODY:g,DIV:1<A.length?g:n,defaultAction:n,
elements:this.selectedBlocks()}:c?{}:{defaultAction:e,elements:this.selectedBlocks()};this.process(c)},indent:function(){var a=this.ed,b=a.dom,k=[];this.process({LI:function(c){if(!F(a,c,k)&&(c=C(c,b))){var f=c,j=b.create("li",{style:v});b.insertAfter(j,f);var m=b.getParent(f,"ol,ul"),f=m.tagName,g=b.getStyle(m,"list-style-type"),m=m.className||"",l={};""!==g&&(l.style="list-style-type: "+g+";");f=b.create(f,l);""!=m&&(f.className=m);j.appendChild(f);(d.isIE7||d.isIE8)&&c.appendChild(a.dom.create("br",
{_mce_bogus:"1"}));f.appendChild(c);x(f.parentNode,!1);x(f,!1);k.push(c)}},defaultAction:this.adjustPaddingFunction(!0),elements:this.selectedBlocks()})},outdent:function(a,b){var k=this,c=k.ed,f=c.dom,j=[],m=b&&d.is(b,"array")?b:this.selectedBlocks();this.process({LI:function(a){var b,d;if(!F(c,a,j)){if(""!==f.getStyle(a,"margin-left")||""!==f.getStyle(a,"padding-left"))return k.adjustPaddingFunction(!1)(a);b=f.getStyle(a,"text-align",!0);if("center"===b||"right"===b)f.setStyle(a,"text-align","left");
else if(a=C(a,f))b=a.parentNode,d=a.parentNode.parentNode,"P"===d.tagName?f.split(d,a.parentNode):(f.split(b,a),"LI"===d.tagName?f.split(d,a):f.is(d,"ol,ul")||f.rename(a,"p")),f.hasClass(a.parentNode,"inline-task-list")?a.hasAttribute("data-inline-task-id")||a.setAttribute("data-inline-task-id",""):a.removeAttribute("data-inline-task-id"),j.push(a)}},defaultAction:this.adjustPaddingFunction(!1),elements:m});y(j,x)},isEmptyElement:function(a){var b=this.ed.dom;return 0===d.grep(a.childNodes,function(a){return!("BR"===
a.nodeName||"SPAN"===a.nodeName&&"bookmark"==b.getAttrib(a,"data-mce-type")||3===a.nodeType&&(a.nodeValue==String.fromCharCode(160)||""==a.nodeValue))}).length},process:function(a){function b(b){(d.isIE7||d.isIE8)&&D(b).find("br[_mce_bogus='1']").remove();m.removeClass(b,"_mce_act_on");if(b&&!(1!==b.nodeType||1<g.length&&f.isEmptyElement(b))){var b=I(b,m),c=a[b.tagName];c||(c=a.defaultAction);c(b)}}function k(a){f.splitSafeEach(a.childNodes,b)}function c(a,b){return 0<=b&&a.hasChildNodes()&&b<a.childNodes.length&&
"BR"===a.childNodes[b].tagName}var f=this,j=f.ed.selection,m=f.ed.dom,g,l;if(!m.select("td.mceSelected.numberingColumn").length){g=a.elements;l=j.getRng(!0);if(!l.collapsed&&(c(l.endContainer,l.endOffset-1)&&(l.setEnd(l.endContainer,l.endOffset-1),j.setRng(l)),c(l.startContainer,l.startOffset)))l.setStart(l.startContainer,l.startOffset+1),j.setRng(l);if(d.isIE7||d.isIE8)if(l=f.ed.selection.getNode(),"LI"===l.tagName&&l.parentNode.lastChild!==l){var p=f.ed.getDoc().createTextNode(o.Rte.HIDDEN_CHAR);
l.appendChild(p)}z=j.getBookmark();a.OL=a.UL=k;f.splitSafeEach(g,b);j.moveToBookmark(z);z=null;j=j.getNode();null===m.getParent(j,"td")&&f.ed.execCommand("mceRepaint")}},splitSafeEach:function(a,b){d.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))?this.classBasedEach(a,b):y(a,b)},classBasedEach:function(a,b){var d=this.ed.dom,c;y(a,function(a){d.addClass(a,"_mce_act_on")});for(c=d.select("._mce_act_on");0<c.length;)c=c.shift(),d.removeClass(c,
"_mce_act_on"),b(c),c=d.select("._mce_act_on")},adjustPaddingFunction:function(a){var b,d,c=this.ed;b=c.settings.indentation;d=/[a-z%]+/i.exec(b);b=parseInt(b,10);return function(f){var j;j=parseInt(c.dom.getStyle(f,"margin-left")||0,10)+parseInt(c.dom.getStyle(f,"padding-left")||0,10);j=a?j+b:j-b;c.dom.setStyle(f,"padding-left","");c.dom.setStyle(f,"margin-left",0<j?j+d:"")}},selectedBlocks:function(){var a=this.ed,b=a.selection.getSelectedBlocks();return 0===b.length?[a.dom.getRoot()]:b},getInfo:function(){return{longname:"Lists",
author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:d.majorVersion+"."+d.minorVersion}}}});require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/lists/editor_plugin_src",function(d){var o=require("tinymce");o.create("tinymce.plugins.Lists",d);o.PluginManager.add("lists",o.plugins.Lists)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/table/editor_plugin_src.js' */
define("atlassian-tinymce/plugins/table/editor_plugin_src",["tinymce","ajs","jquery","confluence/storage-manager"],function(j,r,l,X){function x(d,i){return parseInt(d.getAttribute(i)||1)}function Y(d,i,u){function C(b,L){b=b.cloneNode(L);b.removeAttribute("id");L&&D()&&b.removeChild(b.children[0]);return b}function E(){var b=0;h=[];e(["thead","tbody","tfoot"],function(L){var a=i.select("> "+L+" tr",d);e(a,function(a,g){g+=b;e(i.select("> td, > th",a),function(b,a){var o,f,c,k;if(h[g])for(;h[g][a];)a++;
c=x(b,"rowspan");k=x(b,"colspan");for(f=g;f<g+c;f++){h[f]||(h[f]=[]);for(o=a;o<a+k;o++)h[f][o]={part:L,real:f==g&&o==a,elm:b,rowspan:c,colspan:k}}})});b+=a.length})}function A(b,a){var g;if(g=h[a])return g[b]}function p(b,a,g){b&&(g=parseInt(g),1===g?b.removeAttribute(a,1):b.setAttribute(a,g,1))}function y(b){return b&&(i.hasClass(b.elm,"mceSelected")||b==H)}function B(){var b=[];e(d.rows,function(a){e(a.cells,function(g){if(i.hasClass(g,"mceSelected")||g==H.elm)return b.push(a),!1})});return b}function z(b){var a;
j.walk(b,function(g){var o;if(3===g.nodeType)return e(i.getParents(g.parentNode,null,b).reverse(),function(b){b=C(b,!1);a?o&&o.appendChild(b):a=o=b;o=b}),o&&(o.innerHTML=j.isIE?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes");b=C(b,!1);p(b,"rowSpan",1);p(b,"colSpan",1);a?b.appendChild(a):j.isIE||(b.innerHTML='<br data-mce-bogus="1" />');l(b).attr("contenteditable","true").removeClass("numberingColumn");return b}function a(){var b=i.createRng();e(i.select("tr",d),function(b){0===b.cells.length&&
i.remove(b)});if(0===i.select("tr",d).length)b.setStartAfter(d),b.setEndAfter(d),u.setRng(b),i.remove(d);else if(e(i.select("thead,tbody,tfoot",d),function(b){0===b.rows.length&&i.remove(b)}),E(),b=h[Math.min(h.length-1,m.y)])if(b=b[Math.min(b.length-1,m.x)].elm)j.isIE9||j.isIE10up?u.setCursorLocation(b,0):u.select(b,!0),u.collapse(!0)}function n(b,a,g,o){var t,M,f,c,k;t=h[a][b].elm.parentNode;for(f=1;f<=g;f++)if(t=i.getNext(t,"tr")){for(M=b;0<=M;M--)if(k=h[a+f][M].elm,k.parentNode==t){for(c=1;c<=
o;c++)i.insertAfter(z(k),k);break}if(-1==M)for(c=1;c<=o;c++)t.insertBefore(z(t.cells[0]),t.cells[0])}}function Q(){e(h,function(b,a){e(b,function(b,o){var t,f,c;if(y(b)&&(b=b.elm,t=x(b,"colspan"),f=x(b,"rowspan"),1<t||1<f)){p(b,"rowSpan",1);p(b,"colSpan",1);for(c=0;c<t-1;c++)i.insertAfter(z(b),b);n(o,a,f-1,t)}})})}function O(b){var a,g,o,t,f,c,k,d;e(h,function(g,o){e(g,function(g){if(y(g)&&(g=g.elm,f=g.parentNode,c=C(f,!1),a=o,b))return!1});if(b)return!a});for(t=0;t<h[0].length;t++)if(h[a][t]&&(g=
h[a][t].elm,g!=o)){if(b){if(0<a&&h[a-1][t]&&(k=h[a-1][t].elm,d=x(k,"rowSpan"),1<d)){p(k,"rowSpan",d+1);continue}}else if(d=x(g,"rowspan"),1<d){p(g,"rowSpan",d+1);continue}a:if(o=t,1===h.length)k=!1;else{for(k=0;k<h.length;k++)if("TH"!==h[k][o].elm.tagName.toUpperCase()){k=!1;break a}k=!0}o=k?i.create("th"):i.create("td");o.colSpan=g.colSpan;o.width=g.width;o.innerHTML=j.isIE9?"":j.isIE?"&nbsp;":'<br data-mce-bogus="1" />';o.className=g.className;k||(i.removeClass(o,j.settings.confluence_table_heading_style),
i.addClass(o,j.settings.confluence_table_cell_style));k=i.getAttrib(g,"data-highlight-colour");a:{d=t;var n=h[0][d].elm.getAttribute("data-highlight-colour");if(null===n)d=!1;else{for(var s=0;s<h.length;s++)if(h[s][d].elm.getAttribute("data-highlight-colour")!==n){d=!1;break a}d=!0}}d?i.setAttrib(o,"data-highlight-colour",k):i.removeClass(o,"highlight-"+k);c.appendChild(o);o=g}c.hasChildNodes()&&(b?f.parentNode.insertBefore(c,f):i.insertAfter(c,f));w()}function v(b){var a,g,o=[];e(h,function(g){e(g,
function(g,o){if(y(g)&&(a=o,b))return!1});if(b)return!a});if(0==a&&b&&D())return!1;e(h,function(f,k){var c,d,h;if(f[a]){c=f[a].elm;if(r.DarkFeatures.isEnabled("confluence.table.resizable")&&0===k){d=l(c).closest("table");h=d.find(">colgroup>col").eq(a);var e=l("<col>");b?e.insertBefore(h):e.insertAfter(h);d.hasClass("fixed-table")&&(!F||0===parseFloat(F)?e.css({width:R+2*S+T}):e.css({width:F}))}if(c!=g){h=x(c,"colspan");d=x(c,"rowspan");if(1==h){var s=i.create(c.tagName);s.colSpan=c.colSpan;s.width=
c.width;s.className=c.className;s.innerHTML=j.isIE?"&nbsp;":'<br data-mce-bogus="1"/>';(e=i.getAttrib(c,"data-highlight-colour"))&&i.setAttrib(s,"data-highlight-colour",e);l(s).attr("contenteditable","true").removeClass("numberingColumn");b?c.parentNode.insertBefore(s,c):i.insertAfter(s,c);n(a,k,d-1,h);o.push(s)}else p(c,"colSpan",c.colSpan+1);g=c}}});return o}function w(){if(D()){q=1;var b=0,a=0;e(d.rows,function(g){g=l(g);r.Rte.Table.areCellsHeadings(g.children())?g.children(":first").addClass("numberingColumn").attr("contenteditable",
"true"):0<a?a--:(g.children(":first").html(q).attr("contenteditable","false").addClass("numberingColumn"),b=g.children(":first").attr("rowspan"),1<b&&(a=b-1),q++)})}}function D(){return l(d.rows[0]).children(":first").hasClass("numberingColumn")}function k(b){if(b){if(l(d.rows[0]).children(":first").addClass("numberingColumn"),r.DarkFeatures.isEnabled("confluence.table.resizable")){var b=l(d),a=b.find(">colgroup>col").eq(0),g=l("<col>");g.insertBefore(a);b.hasClass("fixed-table")&&g.css({width:R+
2*S+T})}}else l(d.rows[0]).children(":first").removeClass("numberingColumn"),r.DarkFeatures.isEnabled("confluence.table.resizable")&&l(d).find(">colgroup>col").eq(0).remove()}function c(){var b=[];e(h,function(a){e(a,function(a,c){y(a)&&-1===j.inArray(b,c)&&(r.DarkFeatures.isEnabled("confluence.table.resizable")&&l(a.elm).closest("table").find(">colgroup>col").eq(c).remove(),e(h,function(b){if(b[c]){var b=b[c].elm,a;a=x(b,"colSpan");1<a?p(b,"colSpan",a-1):i.remove(b)}}),b.push(c))})});a()}function f(){var b=
{};e(h,function(a){e(a,function(a,c){y(a)&&(r.DarkFeatures.isEnabled("confluence.table.resizable")&&(F=l(a.elm).closest("table").find(">colgroup>col").eq(c).css("width"),0===parseFloat(F)&&(F=a.elm.getBoundingClientRect().width)),b[c]||(b[c]=[]))})});e(h,function(a){e(a,function(a,c){b[c]&&b[c].push(a.elm.innerHTML)})});return b}function N(b){b&&b.parentNode&&(u.select(b.parentNode),u.collapse(!0))}function U(b,a){var g=A(b.x,b.y).elm,c="undefined"===typeof a?!0:a;if((j.isGecko||j.isIE)&&g.firstChild)g=
g.firstChild;if(j.isIE9||j.isIE10up){var f=u.getRng(1);c?(f.setStart(g,0),f.setEnd(g,0)):(f.setStartAfter(g,0),f.setEndAfter(g,0));u.setRng(f)}else u.select(g,!0),u.collapse(c)}function V(){var b,a=h[0].length;m.x==a-1&&m.y==h.length-1||(m.x==a-1&&D()?(b={x:1,y:m.y+1},r.Rte.Table.areCellsHeadings(l(h[b.y][0].elm).parent().children())&&(b.x=0)):b=m.x==a-1?{x:0,y:m.y+1}:{x:m.x+1,y:m.y});return b}function W(){var b;0==m.x&&0==m.y||(1==m.x&&D()&&!r.Rte.Table.areCellsHeadings(l(h[m.y][0].elm).parent().children())?
(b=m.y-1,b={x:h[b].length-1,y:b}):0<m.x?b={x:m.x-1,y:m.y}:(b=m.y-1,b={x:h[b].length-1,y:b}));return b}function G(b){var a;e(h,function(g,c){e(g,function(g,f){if(g.elm==b)return a={x:f,y:c},!1});return!a});return a}var h,m,s,H,q;E();var Z=["table.confluenceTable > tbody > tr > th","table.confluenceTable > tbody > tr > td","table.confluenceTable > thead > tr > th","table.confluenceTable > thead > tr > td"];if(H=i.select("td.mceSelected,th.mceSelected")[0]||l(u.getStart()).closest(Z.join(","))[0]){m=
G(H);var I,J;I=J=0;e(h,function(b,a){e(b,function(b,c){var f,k;y(b)&&(b=h[a][c],c>I&&(I=c),a>J&&(J=a),b.real&&(f=b.colspan-1,k=b.rowspan-1,f&&c+f>I&&(I=c+f),k&&a+k>J&&(J=a+k)))})});s={x:I,y:J};H=A(m.x,m.y)}j.extend(this,{deleteTable:function(){var b=i.createRng();b.setStartAfter(d);b.setEndAfter(d);u.setRng(b);i.remove(d)},split:Q,merge:function(b,c,g){var f,k,d,n,q,N;b?(b=G(b),f=b.x,b=b.y,c=f+(c-1),g=b+(g-1)):(f=m.x,b=m.y,c=s.x,g=s.y);if(!(0==f&&D())&&(n=A(f,b),k=A(c,g),n&&k&&n.part==k.part)){Q();
E();n=A(f,b).elm;p(n,"colSpan",c-f+1);p(n,"rowSpan",g-b+1);for(d=b;d<=g;d++)for(k=f;k<=c;k++)h[d]&&h[d][k]&&(b=h[d][k].elm,b!=n&&(q=j.grep(b.childNodes),e(q,function(b){n.appendChild(b)}),q.length&&(q=j.grep(n.childNodes),N=0,e(q,function(b){b.nodeName==="BR"&&(i.getAttrib(b,"data-mce-bogus")&&N++<q.length-1)&&n.removeChild(b)})),i.remove(b)));a()}},insertRow:O,insertCol:v,insertNumCol:function(){if(D())e(h,function(b){b=b[0].elm;l(b).hasClass("numberingColumn")&&null!==b.parentNode&&b.parentNode.removeChild(b)}),
k(!1);else{var b;e(h,function(a){a=a[0].elm;if(b!=a){var c=z(a);a.parentNode.insertBefore(c,a);1<a.rowSpan&&(c.rowSpan=a.rowSpan);b=a}});k(!0)}w()},updateNumCol:w,deleteCols:c,deleteRows:function(){var b;b=B();(j.isIE9||j.isIE10)&&N(b[0]);e(b.reverse(),function(b){var a,c;i.getNext(b,"tr");e(b.cells,function(b){var c=x(b,"rowSpan");1<c&&(p(b,"rowSpan",c-1),a=G(b),n(a.x,a.y,1,1))});a=G(b.cells[0]);e(h[a.y],function(b){var a,b=b.elm;b!=c&&(a=x(b,"rowSpan"),1>=a?i.remove(b):p(b,"rowSpan",a-1),c=b)})});
a();w()},cutRows:function(){var b=B();(j.isIE9||j.isIE10)&&N(b[0]);i.remove(b);a();w();return b},copyRows:function(){var b=B();e(b,function(a,c){b[c]=C(a,!0)});return b},pasteRows:function(b,a){var c=B(),f=c[a?0:c.length-1],k=f.cells.length;e(h,function(b){var a;k=0;e(b,function(b){b.real&&(k+=b.colspan);b.elm.parentNode==f&&(a=1)});if(a)return!1});a||b.reverse();e(b,function(b){var c=b.cells.length,g;l(b.cells[0]).hasClass("numberingColumn")&&(b.removeChild(b.cells[0]),c--);for(q=0;q<c;q++)g=b.cells[q],
p(g,"colSpan",1),p(g,"rowSpan",1);D()&&(b.insertBefore(b.firstChild.cloneNode(!1),b.firstChild),l(b.firstChild).addClass("numberingColumn"),c++);for(;k<c;)v(!1),k++;for(q=c;q<k;q++)b.appendChild(z(b.cells[c-1]));a?f.parentNode.insertBefore(b,f):i.insertAfter(b,f)});w()},getPos:G,setStartCell:function(b){m=G(b)},setEndCell:function(b){var a,c,f,k,d,n,e;s=G(b);if(m&&s){a=Math.min(m.x,s.x);c=Math.min(m.y,s.y);f=Math.max(m.x,s.x);k=Math.max(m.y,s.y);d=f;n=k;var q;for(q=c;q<=n;q++)b=h[q][a],b.real||a-
(b.colspan-1)<a&&(a-=b.colspan-1);for(var j=a;j<=d;j++)b=h[c][j],b.real||c-(b.rowspan-1)<c&&(c-=b.rowspan-1);for(q=c;q<=k;q++)for(j=a;j<=f;j++)b=h[q][j],b.real&&(e=b.colspan-1,b=b.rowspan-1,e&&j+e>d&&(d=j+e),b&&q+b>n&&(n=q+b));i.removeClass(i.select("td.mceSelected,th.mceSelected"),"mceSelected");for(q=c;q<=n;q++)for(j=a;j<=d;j++)h[q][j]&&i.addClass(h[q][j].elm,"mceSelected")}},moveCaretToNextCell:function(){var b=V();b||(O(!1),E(),b=V());U(b)},moveCaretToPrevCell:function(){var b=W();b||(O(!0),E(),
m=G(i.getParent(u.getStart(),"th,td")),b=W());U(b,!1)},cutColumns:function(){var b=f();c();return b},copyColumns:f,pasteColumns:function(b,a){var c=Object.keys(b);a||c.reverse();l.each(c,function(c,f){for(var k=v(a),c=0;c<k.length;c++)k[c].innerHTML=b[f][c]||""})},prepareTableForColPasteAndCheckIfNeedToRepaint:function(b){var a=b[Object.keys(b)[0]].length,c,f,b=!1;e(h,function(b,k){a--;c=k;e(b,function(b,a){f=a})});if(0<a){b=!0;H=A(f,c);for(q=0;q<a;q++)O(!1)}return b},toggleFluidColumnWidth:function(){d&&
d.rows&&(l(d).toggleFluidColumnWidth(),l("#table-mode-picker .dropdown-text").text(P.getLang("table.responsive")))},toggleFixedColumnWidth:function(){d&&d.rows&&(l(d).toggleFixedColumnWidth(),l("#table-mode-picker .dropdown-text").text(P.getLang("table.fixed_width")))}})}var P,e=j.each,K=X("atlassian.editor","tables"),T=1,S=10,R=8,F;return{init:function(d,i){function u(a){var n=d.selection,a=a||n.getNode().parentNode;if(a=d.dom.getParent(a,"table.confluenceTable"))return new Y(a,d.dom,n)}function C(){d.getBody().style.webkitUserSelect=
"";z&&(d.dom.removeClass(d.dom.select("td.mceSelected,th.mceSelected"),"mceSelected"),z=!1)}function E(a){for(var d=[],e="",e=0;e<a.length;e++)d.push(r.Rte.getEditor().serializer.serialize(a[e]));e="<tr>"+d.join("</tr><tr>")+"</tr>";K.setItem("copied",e,7200)}function A(){var a=[],e=K.getItem("copied")||"";e&&(a=d.getDoc().createElement("div"),a.innerHTML="<table>"+e+"</table>",a=l(a).find("tr"));return a}P=d;var p,y,B,z=!0;e([["table","table.desc","mceInsertTable",!0],["delete_table","table.del",
"mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells",
"table.split_cells_desc","mceTableSplitCells",!0],["merge_cells","table.merge_cells_desc","mceTableMergeCells",!0]],function(a){d.addButton(a[0],{title:a[1],cmd:a[2],ui:a[3]})});j.isIE||d.onClick.add(function(a,d){d=d.target;"TABLE"===d.nodeName&&(a.selection.select(d),a.nodeChanged())});d.onPreProcess.add(function(a,d){var e,j,i,l=a.dom,p;e=l.select("table",d.node);for(j=e.length;j--;){i=e[j];l.setAttrib(i,"data-mce-style","");if(p=l.getAttrib(i,"width"))l.setStyle(i,"width",p),l.setAttrib(i,"width",
"");if(p=l.getAttrib(i,"height"))l.setStyle(i,"height",p),l.setAttrib(i,"height","")}});d.onNodeChange.add(function(a,d,e){e=a.selection.getStart();a=a.dom.getParent(e,"td,th,caption");d.setActive("table","TABLE"===e.nodeName||!!a);a&&"CAPTION"===a.nodeName&&(a=0);d.setDisabled("delete_table",!a);d.setDisabled("delete_col",!a);d.setDisabled("delete_table",!a);d.setDisabled("delete_row",!a);d.setDisabled("col_after",!a);d.setDisabled("col_before",!a);d.setDisabled("row_after",!a);d.setDisabled("row_before",
!a);d.setDisabled("row_props",!a);d.setDisabled("cell_props",!a);d.setDisabled("split_cells",!a);d.setDisabled("merge_cells",!a)});d.onInit.add(function(a){function d(a){if(j.isWebKit){var c=a.selection.getRng(),f=a.selection.getNode(),e=a.dom.getParent(c.startContainer,"TD,TH"),i=e,l=a.dom.getParent(c.startContainer,"TABLE"),n;l&&(n=l.parentNode);l=3===c.startContainer.nodeType&&0==c.startOffset&&0==c.endOffset&&i&&("TR"===f.nodeName||f==n);i=("TD"===f.nodeName||"TH"===f.nodeName)&&!i;if(l||i){e||
(e=f);for(f=e.lastChild;f.lastChild;)f=f.lastChild;c.setEnd(f,f.nodeValue.length);a.selection.setRng(c)}}}var i,l,v=a.dom,w;p=a.windowManager;a.onMouseDown.add(function(a,c){2!=c.button&&(C(),l=v.getParent(c.target,"td,th"),i=v.getParent(l,"table"))});v.bind(a.getDoc(),"mouseover",function(d){var c,f=v.getParent(d.target,"td,th");if(l&&(w||f!=l)&&f){c=v.getParent(f,"table");c==i&&(w||(w=u(c),w.setStartCell(l),a.getBody().style.webkitUserSelect="none"),w.setEndCell(f),z=!0);c=a.selection.getSel();
try{c.removeAllRanges?c.removeAllRanges():c.empty()}catch(e){}d.preventDefault()}});a.onMouseUp.add(function(a){var c,f=a.selection,d;f.getSel();var e,n;if(l){w&&(a.getBody().style.webkitUserSelect="");var p=function(a,f){var d=new j.dom.TreeWalker(a,a);do{if(a.nodeType===3&&j.trim(a.nodeValue).length!==0){f?c.setStart(a,0):c.setEnd(a,a.nodeValue.length);break}if(a.nodeName==="BR"){f?c.setStartBefore(a):c.setEndBefore(a);break}}while(a=f?d.next():d.prev())};d=v.select("td.mceSelected,th.mceSelected");
if(0<d.length){c=v.createRng();e=d[0];c.setStartBefore(e);c.setEndAfter(e);p(e,1);d=new j.dom.TreeWalker(e,v.getParent(d[0],"table"));do if("TD"===e.nodeName||"TH"===e.nodeName){if(!v.hasClass(e,"mceSelected"))break;n=e}while(e=d.next());p(n);f.setRng(c)}a.nodeChanged();l=w=i=null}});a.onUndo.add(function(a){z=0<a.dom.select("td.mceSelected, th.mceSelected").length});a.onKeyUp.add(function(){C()});a.onKeyDown.add(function(a){d(a)});a.onMouseDown.add(function(a,c){2!=c.button&&d(a)});a.plugins.table.fixTableCellSelection=
d;a&&a.plugins.contextmenu&&a.plugins.contextmenu.onContextMenu.add(function(d,c,f){d=a.selection.getNode()||a.getBody();a.dom.getParent(f,"td")||a.dom.getParent(f,"th")||a.dom.select("td.mceSelected,th.mceSelected").length?(c.removeAll(),"A"===d.nodeName&&!a.dom.getAttrib(d,"name")&&(c.add({title:"advanced.link_desc",icon:"link",cmd:a.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),c.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"}),c.addSeparator()),"IMG"===d.nodeName&&-1===d.className.indexOf("mceItem")&&
(c.add({title:"advanced.image_desc",icon:"image",cmd:a.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),c.addSeparator()),c.add({title:"table.desc",icon:"table",cmd:"mceInsertTable",value:{action:"insert"}}),c.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"}),c.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"}),c.addSeparator(),f=c.addMenu({title:"table.cell"}),f.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"}),f.add({title:"table.split_cells_desc",
icon:"split_cells",cmd:"mceTableSplitCells"}),f.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"}),f=c.addMenu({title:"table.row"}),f.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"}),f.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"}),f.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"}),f.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"}),f.addSeparator(),
f.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"}),f.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"}),f.add({title:"table.paste_row_before_desc",icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!y),f.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!y),f=c.addMenu({title:"table.col"}),f.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"}),f.add({title:"table.col_after_desc",icon:"col_after",
cmd:"mceTableInsertColAfter"}),f.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})):c.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})});j.isWebKit&&a.onKeyDown.add(function(a,c){function d(c,e,h){var n=c?"previousSibling":"nextSibling",m=a.dom.getParent(e,"tr"),p=m[n];if(p)return l(a,e,p,c),j.dom.Event.cancel(h),!0;var p=a.dom.getParent(m,"table"),b=m.parentNode,r=b.nodeName.toLowerCase();if("tbody"===r||r===(c?"tfoot":"thead")){var r=a.dom.select(">tbody",
p),g=r.indexOf(b);c&&0===g||!c&&g===r.length-1?(b=a.dom.select(">"+(c?"thead":"tfoot"),p),b=0!==b.length?b[0]:null):-1===g?(b="thead"===b.tagName.toLowerCase()?0:r.length-1,b=r[b]):b=r[g+(c?-1:1)];if(null!==b)return(m=i(b,c))&&l(a,e,m,c),j.dom.Event.cancel(h),!0}(e=p[n])?(a.selection.setCursorLocation(e,0),h=!0):(e=a.dom.getParent(p,"td,th"))?h=d(c,e,h):(c=i(m,!c),a.selection.setCursorLocation(c,0),h=j.dom.Event.cancel(h));return h}function i(c,d){var f=c&&c[d?"lastChild":"firstChild"];return f&&
"BR"===f.nodeName?a.dom.getParent(f,"td,th"):f}function l(c,d,f,h){for(var j=0,c=c.dom.getParent(d,"td,th");c.previousSibling;)c=c.previousSibling,j+=x(c,"colspan");var n=j,b=0,m=0;e(f.children,function(a,c){b+=x(a,"colspan");m=c;if(b>n)return!1});f=f.childNodes[m];h=i(f,h);a.selection.setCursorLocation(h||f,0)}var n=j.VK,p=c.keyCode,r;if(r=p==n.UP||p==n.DOWN){r=a;var h=r.selection.getNode();r=null!==r.dom.getParent(h,"tr")}if(r){var m=a.selection.getNode();setTimeout(function(){var e=a.selection.getNode(),
e=a.dom.getParent(e,"td,th"),h=a.dom.getParent(m,"td,th");e&&(e!==h&&a.dom.getParent(e,"TABLE")===a.dom.getParent(h,"TABLE"))&&d(!c.shiftKey&&p===n.UP,m,c)},0)}});if(!j.isIE){var r=function(){};j.isGecko&&a.onKeyDown.add(function(a,c){var d,e,i=a.dom;if(37===c.keyCode||38===c.keyCode)if(d=a.selection.getRng(),(e=i.getParent(d.startContainer,"table"))&&a.getBody().firstChild==e){var j=d,l=e.ownerDocument;d=l.createRange();d.setStartBefore(e);d.setEnd(j.endContainer,j.endOffset);j=l.createElement("body");
j.appendChild(d.cloneContents());0===j.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length&&(d=i.createRng(),d.setStartBefore(e),d.setEndBefore(e),a.selection.setRng(d),c.preventDefault())}});a.onKeyUp.add(r);a.onSetContent.add(r);a.onVisualAid.add(r);j.isGecko&&a.onKeyDown.add(function(a,c){if(c.keyCode===j.VK.ENTER&&c.shiftKey){var d=a.selection.getRng().startContainer;if(v.getParent(d,"td,th")){var e=a.getDoc().createTextNode("ï»¿");v.insertAfter(e,
d)}}});a.startContent=a.getContent({format:"raw"})}});e({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){d.dom.getParent(d.selection.getNode(),"th,td");d.dom.select("td.mceSelected,th.mceSelected").length&&a.merge()},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertNumberingCol:function(a){a.insertNumCol()},mceTableUpdateNumberingCol:function(a){a.updateNumCol()},mceAutoWidth:function(a){a.toggleFluidColumnWidth()},
mceFixedWidth:function(a){a.toggleFixedColumnWidth()},mceTableInsertColBefore:function(a){F=null;a.insertCol(!0)},mceTableInsertColAfter:function(a){F=null;a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){y=a.cutRows();E(y)},mceTableCopyRow:function(a){y=a.copyRows();E(y)},mceTablePasteRowBefore:function(a){a.pasteRows(A(),!0)},mceTablePasteRowAfter:function(a){a.pasteRows(A())},mceTableDelete:function(a){a.deleteTable()},
mceTableMoveCaretToNextCell:function(a){a.moveCaretToNextCell()},mceTableMoveCaretToPrevCell:function(a){a.moveCaretToPrevCell()},mceTableCopyCol:function(a){B=a.copyColumns();K.setItem("copiedCols",JSON.stringify(B))},mceTableCutCol:function(a){B=a.cutColumns();K.setItem("copiedCols",JSON.stringify(B))},mceTablePasteColBefore:function(a){var e=JSON.parse(K.getItem("copiedCols"))||{};a.prepareTableForColPasteAndCheckIfNeedToRepaint(e)&&(d.execCommand("mceRepaint"),a=u());a.pasteColumns(e,!0)},mceTablePasteColAfter:function(a){a.pasteColumns(JSON.parse(K.getItem("copiedCols"))||
{},!1)}},function(a,e){d.addCommand(e,function(){var e=u();e&&(a(e),d.execCommand("mceRepaint"),C())})});e({mceInsertTable:function(a){p.open({url:i+"/table.htm",width:400+parseInt(d.getLang("table.table_delta_width",0)),height:320+parseInt(d.getLang("table.table_delta_height",0)),inline:1},{plugin_url:i,action:a?a.action:0})},mceTableRowProps:function(){p.open({url:i+"/row.htm",width:400+parseInt(d.getLang("table.rowprops_delta_width",0)),height:295+parseInt(d.getLang("table.rowprops_delta_height",
0)),inline:1},{plugin_url:i})},mceTableCellProps:function(){p.open({url:i+"/cell.htm",width:400+parseInt(d.getLang("table.cellprops_delta_width",0)),height:295+parseInt(d.getLang("table.cellprops_delta_height",0)),inline:1},{plugin_url:i})}},function(a,e){d.addCommand(e,function(d,e){a(e)})})}}});
require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/table/editor_plugin_src",function(j){var r=require("tinymce");r.create("tinymce.plugins.TablePlugin",j);r.PluginManager.add("table",r.plugins.TablePlugin)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/table/js/table.js' */
define("atlassian-tinymce/plugins/table/table","ajs tinymce tinymce/popup jquery document confluence/analytics-support".split(" "),function(f,d,u,p,t,q){function k(c,a){var d=t.forms[0].elements[c];if(typeof a==="undefined"||a==null){a="";if(d)a=d.value}if(a=="")return"";a=a.replace(/&/g,"&amp;");a=a.replace(/\"/g,"&quot;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return" "+c+'="'+a+'"'}return{insertTable:function(){var c=p("#tinymce-table-form")[0],a=f.Rte.getEditor(),i=a.dom,g=2,r=2,j=
d.settings.confluence_table_style,e="",b="",l;l=i.getParent(a.selection.getNode(),"table");var m,s;m=c.elements.heading.checked;s=c.elements["equal-width-columns"].checked;g=c.elements.cols.value;r=c.elements.rows.value;c=p("#tinymce-table-form input[name='width']").val();b=b+"<table"+k("data-mce-new","1");if(c&&a.settings.inline_styles){e&&(e=e+"; ");/^[0-9\.]+$/.test(c)&&(c=c+"px");e=e+("width: "+c)}else b=b+k("width",c);b=b+k("class",j);b=b+k("style",e);b=b+">";for(j=0;j<r;j++){b=b+"<tr>";for(e=
0;e<g;e++){var n,o;if(j==0&&m){c="th";o=d.settings.confluence_table_heading_style}else{c="td";o=d.settings.confluence_table_cell_style}s&&(n=' width="'+Math.round(100/g*100)/100+'%"');b=b+("<"+c+(n?n:"")+' class="'+o+'">');!d.isIE||d.isIE11?b=b+'<br data-mce-bogus="1"/>':d.isIE9&&(b=b+"&nbsp;");b=b+("</"+c+">")}b=b+"</tr>"}b=b+"</table>";if(a.settings.fix_table_elements){var h="";f.Rte.BookmarkManager.restoreBookmark();a.selection.setContent('<br class="_mce_marker" />');d.each(["h1","h2","h3","h4",
"h5","h6","p"],function(a){h&&(h=h+",");h=h+(a+" ._mce_marker")});d.each(a.dom.select(h),function(b){a.dom.split(a.dom.getParent(b,"h1,h2,h3,h4,h5,h6,p"),b)});g=i.select("br._mce_marker")[0];a.selection.select(g);a.selection.setContent(b);a.dom.remove(g)}else a.execCommand("mceInsertContent",false,b);d.each(i.select("table[data-mce-new]"),function(b){var c=i.select(m?"th":"td",b);try{a.selection.setCursorLocation(c[0],0)}catch(d){}i.setAttrib(b,"data-mce-new","")});a.addVisual();a.execCommand("mceEndUndoLevel",
false,{},{skip_undo:true});l&&d.DOM.hasClass(l,"confluenceTable")?q.publish("confluence.table.create.nested",{pageId:f.Meta.get("page-id")}):q.publish("confluence.table.create",{pageId:f.Meta.get("page-id")})}}});require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/table/table",function(f){var d=require("tinymce");require("jquery").extend(d.plugins.TablePlugin.prototype,f)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/autoresize/editor_plugin_src.js' */
define("atlassian-tinymce/plugins/autoresize/editor_plugin_src",["ajs","underscore","tinymce","jquery"],function(g,h,i,l){return{init:function(a){function b(j){var e,d=a.getDoc();e=d.body;var g=d.documentElement,m=i.DOM,f=c.autoresize_min_height,j=h.isObject(j)?j.forceExec||!1:!1,d=l(d).height();d>c.autoresize_min_height&&(f=d);c.autoresize_max_height&&d>c.autoresize_max_height?(f=c.autoresize_max_height,e.style.overflowY="auto",g.style.overflowY="auto"):(e.style.overflowY="hidden",g.style.overflowY=
"hidden",e.scrollTop=0);if(j||f!==k)e=f-k,m.setStyle(m.get(a.id+"_ifr"),"height",f+"px"),k=f,i.isWebKit&&0>e&&b()}a.onInit.add(function(){l(a.getBody()).addClass("resizable")});var c=this,k=0;a.getParam("fullscreen_is_enabled")||(c.editor=a,c.autoresize_min_height=parseInt(a.getParam("autoresize_min_height",a.getElement().offsetHeight)),c.autoresize_max_height=parseInt(a.getParam("autoresize_max_height",0)),a.onChange.add(b),a.onSetContent.add(b),a.onPaste.add(b),a.onKeyUp.add(b),a.onPostRender.add(b),
a.getParam("autoresize_on_init",!0)&&(a.onLoad.add(b),a.onLoadContent.add(b)),a.addCommand("mceAutoResize",b))},getInfo:function(){return{longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:i.majorVersion+"."+i.minorVersion}}}});
require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/autoresize/editor_plugin_src",function(g){var h=require("tinymce");h.create("tinymce.plugins.AutoResizePlugin",g);h.PluginManager.add("autoresize",h.plugins.AutoResizePlugin)});
}catch(e){WRMCB(e)};